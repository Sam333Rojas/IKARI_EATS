{% extends "logged_base.html" %}
{% load static %}
{% block inner-content %}
    <script>
        var res_lat = {{ order.restaurant.latitude }};
        var res_log = {{ order.restaurant.longitude }};
        var dealer_lat = {{ dealer.latitude }};
        var dealer_log = {{ dealer.longitude }};
        var client_lat = {{ order.client.latitude }};
        var client_log = {{ order.client.longitude }};
    </script>
    <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map.

          */
        #map {
            margin: 20px 0;
            padding: 0;
            height: 300px;
            float: left;
            width: 100%;
        }

        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
    <div class="row" style="height: 10%;">
    </div>
    <div class="row jumbotron ">
        <div class="col" style="margin-left: 5%">
            <div id="map"></div>
        </div>
        <div class="col" style="margin-right: 5%">
            <br>
            <h2><strong>Order Id :</strong> {{ order.id }}</h2>
            {% if order.status == 1 %}
            <div class="alert alert-warning"> Waiting for your request to be processed ,reload the page to know the travel time to the restaurant</div>
            {% elif order.status == 2 %}
            <div class="alert alert-success">
                You are the official deliverer for this order, come to the restaurant to pick up the order, now you can see the location of the customer on your map
            </div>
            {% endif %}
            <h3><strong>Item to be picked up:</strong> {{ order.item.name }}</h3>
            <h3><strong>Place to go:</strong> {{ order.restaurant.address }}</h3>

        </div>
        <br>
    </div>
    <br>
{% endblock %}

{% block additional_js %}
    {% csrf_token %}
    <script type="text/javascript">
        var csrftoken = $("[name=csrfmiddlewaretoken]").val();
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDqxIL3Ii8OAx3f8FdtDw5UjW3AM6sYDyQ&callback=initMap"
            async defer></script>
    {% if order.status == 2 %}
        <script src="{% static "js/current_order2.js" %}"></script>
    {% else %}
        <script src="{% static "js/current_order.js" %}"></script>
    {% endif %}
{% endblock %}

